#Project 1 - Bitcoin Generator (DOSP Project)

**Group Members:**
  1. Prerana Venugopal, UFID=1827-4557
  2. Rashi Pandey, UFID=8812-4446

**Outline:**
  
 We have used the Actor Model in Erlang to mine bitcoins and hash with the required number of leading zeros using SHA-256. We have also implemented the Remote Configuration using client and server machines.

#Directions

1.	Go to the folder path
2.	Start the erl shell and compile the master and worker using the command c(master). and c(worker).
3.	Run master.erl using the command erl -name name@[your_ip] -setcookie[your_cookie_name] : erl -name prerana@[ip] -setcookie prerana
4.	Run worker.erl using the command erl -name name@[your_ip] -setcookie[your_ip] : erl -name rashi@[ip] -setcookie prerana
5.	A warning might appear, ignore it and proceed with the inputs generated by code to start mining.

#Implementation

1.	Run the master.erl using the above step and fill the desired values in the number of zeros to mine and number of miners to spawn.
2.	Run the master server on 1 machine and pass the number of zeros to spawn, then run the worker on the other machine and enter the host IP address.

 
**System 1: master.erl**
  
  The server is started prior to the client with the number of leading zeros (K) and the number of nodes/actors on each system (N_Nodes) as its arguments.
The server spawns N_Nodes (actors) to mine coins and waits to receive messages either from the spawned actors that a coin is found, which the server will print, or from a client that wishes to participate in the mining.
Upon receiving a message from a client, the server further spawns multiple children (actors) to continuously mine for coins on a client. Any number of clients may connect. These actors on the client behave the same as actors on the server and will send a message to the server when a coin is found.
Each child actor is designed to continue hashing/mining until the server finds a total of 100 coins.

**System 2: worker.erl**
  
  Client takes in the server node name as the argument and a connection is established with the server after which the server spawns actors on the client to mine for coins.

**1. Work Unit:**
  
  Every child actor generates a random string, computes the hash, and mines for bitcoins. Each actor runs until the minimum leading zero condition is satisfied and the generated hash is less than the target value. Upon finding 100 coins, all the actors are killed. We determined that each actor should take on the complete responsibility of generating the string, hashing it, and checking if its a valid coin as when the number of work units were broken down. Many workers stood idle as the server program would generate a string for each actor (thousands of them) and then send the string to each actor for hashing. Once a hash was found and sent to the server, the check for valid coin was moved to the child actor as the server spent a large number of time verifying each hash generated by these large number of actors. The child actor now takes all the responsibility and the server only tells the child actor whether to continue mining or not.

**2. Result of Program for Input 4:**

![image](https://github.com/vprerana/BitcoinGenerator/blob/7151affd9d1af98c0bbb6558ff06ec91022cf199/SetupServer.png)
Fig 1: Setup for Server

![image](https://github.com/vprerana/BitcoinGenerator/blob/7151affd9d1af98c0bbb6558ff06ec91022cf199/ClientForFourZeroes.png)
Fig 2: Setup for client (output).

![image](https://github.com/vprerana/BitcoinGenerator/blob/7151affd9d1af98c0bbb6558ff06ec91022cf199/4ZeroesConcurrentRunning.png)
Fig 3: Running the program to mine coinds for 4 nodes.

Result for running the program on two complete different systems can be found in section 4 (finding the largest coin) where the local server system and a completely different client system each find the largest coin.


**3. Running Time:**

![image](https://github.com/vprerana/BitcoinGenerator/blob/7151affd9d1af98c0bbb6558ff06ec91022cf199/ClockTime_4Zeroes.png)
Fig 3: Runtimes when run on four nodes.
  
  Total Clock time  = 15532.032
  
  Total CPU time = 119375
  
  CPU time/ Run time ratio =  7.685729722936445
  

**4. Largest coin found (i.e., the coin with the most number of leading 0's)**
  
  We found the largest coin to have seven zeros. The program was run for 1 hour to find 8 zeros, but no coins were found and the program was stopped.

![image](https://github.com/vprerana/BitcoinGenerator/blob/7151affd9d1af98c0bbb6558ff06ec91022cf199/MaxNumberOfZeroes.png)
Fig 4: Coin starting with maximum number of  zeros (7).

**5. Largest number of working machines**
  
  We were able to run the script on four nodes (systems) but the same could be scaled to run on many more.
  
